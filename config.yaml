# SoulLink_Live2D 配置文件
# 请根据您的需要修改以下配置

# 服务器配置
server:
  host: "0.0.0.0"
  port: 3000
  # 模型扫描目录（只扫描 l2d 目录）
  modelDirs:
    - "./l2d"

# LLM 配置
llm:
  # 表情生成模式: "local" (本地模型) 或 "api" (远程API)
  mode: "api"

  # ========== 本地模型配置 (mode: local) ==========
  local:
    # 基础模型路径
    baseModelPath: "./ct2model/models/qwen2.5-1.5b-instruct"
    # LoRA 权重路径
    loraModelPath: "./ct2model/output/l2d-motion-lora/final"
    # 设备: auto / cuda / cpu
    device: "auto"
    # 推理参数
    temperature: 0.1
    maxNewTokens: 512

  # ========== 远程 API 配置 (mode: api) ==========
  api:
    # API 提供商: openai, deepseek, claude, ollama, custom
    #provider: siliconflow

    # API Key (必填)

    #apiKey: "sk-xxx"
    #apiKey: "sk-xxx"
    #apiKey: "sk-rxRthcrOx2WrZf3aJXJEtO5hch2Eta35DzsXJf85hVUsJ4qc"


    # API 基础 URL
    # baseUrl: https://api.ephone.chat/v1
    # DeepSeek: https://api.deepseek.com/v1
    # Ollama: http://localhost:11434/v1
    # baseUrl: "https://api.siliconflow.cn/v1"
    #baseUrl: "http://115.190.234.39:3000/v1"

    # 模型名称
    # OpenAI: gpt-4o-mini
    # DeepSeek: deepseek-chat
    # Ollama: llama2, mistral, etc.
    # model: "deepseek-ai/DeepSeek-V3.2"
    #model: "gemini-2.5-flash-lite"
    # model: "gpt-4o-mini"

    # 生成参数
    temperature: 0.1
    maxTokens: 800
    #出现一些报错的时候可以适当拉高maxTokens

    #========== 表情生成专用配置 (可选) ==========
    ##配置后可以为表情生成使用不同的模型/API
    expression:
      provider: openai
      apiKey: "sk-xxx"  # 不填则继承 api.apiKey
      baseUrl: "https://api.openai.com/v1"  # 不填则继承 api.baseUrl
      model: "gpt-4o-mini"  # 推荐使用轻量模型，响应快
      temperature: 0.1
      maxTokens: 2000

    #========== 聊天对话专用配置 (可选) ==========
    #如果不配置，将使用上面的 api 配置
    #配置后可以为聊天对话使用不同的模型/API
    chat:
      provider: openai
      apiKey: "sk-xxx"  # 不填则继承 api.apiKey
      baseUrl: "https://api.openai.com/v1"  # 不填则继承 api.baseUrl
      model: "gpt-4o"  # 可以使用更强大的模型获得更好的对话质量
      temperature: 0.5
      maxTokens: 5000

# 动画配置
animation:
  # 默认表情过渡时间 (毫秒)
  defaultDuration: 1000
  
  # 缓动函数: linear, easeInQuad, easeOutQuad, easeInOutQuad, 
  #          easeInCubic, easeOutCubic, easeInOutCubic, easeInOutSine
  easing: "easeInOutCubic"
  
  # 自动重置延迟 (毫秒) - LLM生成的表情在此时间后自动恢复默认
  autoResetDelay: 3000

# 模型配置
model:
  # 模型目录路径 (相对于 index.html)
  directory: "./l2d"
  
  # 默认缩放比例
  defaultScale: 0.8

# 界面配置
ui:
  # 是否显示控制面板
  showControlPanel: true

  # 是否显示物理参数 (头发、裙子等)
  showPhysicsParams: false

  # 默认背景 (索引，0-6)
  defaultBackground: 0

# 语音配置 (ASR 语音识别 + TTS 语音合成)
voice:
  # ========== ASR 语音识别配置 ==========
  asr:
    # 是否启用语音识别
    enabled: true
    # 识别模式: "browser" (浏览器 Web Speech API) 或 "local" (本地 Whisper)
    mode: "browser"
    # 语言代码
    language: "zh-CN"
    # 识别完成后是否自动发送消息给 AI
    autoSend: true
    # 本地 Whisper 模式配置 (mode: local 时生效)
    local:
      # 模型存放路径
      modelPath: "./models/whisper"
      # 模型大小: tiny/base/small/medium/large
      # 运行 python scripts/download_asr_model.py 下载模型
      modelSize: "base"

  # ========== TTS 语音合成配置 ==========
  tts:
    # 是否启用语音合成 (AI 回复时播放语音)
    enabled: false
    # TTS API 地址 (OpenAI 格式)
    baseUrl: "https://api.openai.com/v1"
    # API Key
    apiKey: "sk-xxx"
    # 模型名称
    model: "tts-1"
    # 声音选择: alloy/echo/fable/onyx/nova/shimmer
    voice: "alloy"
    # 语速 (0.25 - 4.0)
    speed: 1.0
